/**
 * Simple logger utility with configurable debug mode
 */
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["ERROR"] = 0] = "ERROR";
    LogLevel[LogLevel["WARN"] = 1] = "WARN";
    LogLevel[LogLevel["INFO"] = 2] = "INFO";
    LogLevel[LogLevel["DEBUG"] = 3] = "DEBUG";
})(LogLevel || (LogLevel = {}));
class Logger {
    debugEnabled;
    prefix;
    constructor(config = {}) {
        this.debugEnabled = config.debug ?? false;
        this.prefix = config.prefix ?? '[PostHog Agent]';
    }
    setDebug(enabled) {
        this.debugEnabled = enabled;
    }
    formatMessage(level, message, data) {
        const timestamp = new Date().toISOString();
        const base = `${timestamp} ${this.prefix} ${level} ${message}`;
        if (data !== undefined) {
            return `${base} ${JSON.stringify(data, null, 2)}`;
        }
        return base;
    }
    error(message, error) {
        // Always log errors
        if (error instanceof Error) {
            console.error(this.formatMessage('[ERROR]', message, {
                message: error.message,
                stack: error.stack
            }));
        }
        else {
            console.error(this.formatMessage('[ERROR]', message, error));
        }
    }
    warn(message, data) {
        if (this.debugEnabled) {
            console.warn(this.formatMessage('[WARN]', message, data));
        }
    }
    info(message, data) {
        if (this.debugEnabled) {
            console.log(this.formatMessage('[INFO]', message, data));
        }
    }
    debug(message, data) {
        if (this.debugEnabled) {
            console.log(this.formatMessage('[DEBUG]', message, data));
        }
    }
    /**
     * Create a child logger with additional prefix
     */
    child(childPrefix) {
        return new Logger({
            debug: this.debugEnabled,
            prefix: `${this.prefix} [${childPrefix}]`
        });
    }
}

export { LogLevel, Logger };
//# sourceMappingURL=logger.js.map
