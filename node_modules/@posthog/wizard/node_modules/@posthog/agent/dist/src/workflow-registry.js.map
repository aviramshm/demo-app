{"version":3,"file":"workflow-registry.js","sources":["../../src/workflow-registry.ts"],"sourcesContent":["import type { WorkflowDefinition } from './workflow-types.js';\nimport { PostHogAPIClient } from './posthog-api.js';\n\nexport class WorkflowRegistry {\n  private workflowsById: Map<string, WorkflowDefinition> = new Map();\n  private apiClient?: PostHogAPIClient;\n\n  constructor(apiClient?: PostHogAPIClient, staticDefinitions?: WorkflowDefinition[]) {\n    this.apiClient = apiClient;\n    if (staticDefinitions) {\n      for (const w of staticDefinitions) this.workflowsById.set(w.id, w);\n    }\n  }\n\n  async loadWorkflows(): Promise<void> {\n    if (this.apiClient) {\n      const workflows = await this.apiClient.listWorkflows();\n      for (const w of workflows) this.workflowsById.set(w.id, w);\n    }\n  }\n\n  getWorkflow(id: string): WorkflowDefinition | undefined {\n    return this.workflowsById.get(id);\n  }\n\n  listWorkflows(): WorkflowDefinition[] {\n    return Array.from(this.workflowsById.values());\n  }\n}\n\n"],"names":[],"mappings":"MAGa,gBAAgB,CAAA;AACnB,IAAA,aAAa,GAAoC,IAAI,GAAG,EAAE;AAC1D,IAAA,SAAS;IAEjB,WAAA,CAAY,SAA4B,EAAE,iBAAwC,EAAA;AAChF,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS;QAC1B,IAAI,iBAAiB,EAAE;YACrB,KAAK,MAAM,CAAC,IAAI,iBAAiB;gBAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACpE;IACF;AAEA,IAAA,MAAM,aAAa,GAAA;AACjB,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE;YACtD,KAAK,MAAM,CAAC,IAAI,SAAS;gBAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC5D;IACF;AAEA,IAAA,WAAW,CAAC,EAAU,EAAA;QACpB,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC;IACnC;IAEA,aAAa,GAAA;QACX,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;IAChD;AACD;;;;"}