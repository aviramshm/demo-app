import type { Logger } from './utils/logger.js';
import type { PostHogAPIClient } from './posthog-api.js';
import type { AgentEvent } from './types.js';
interface ProgressMetadata {
    totalSteps?: number;
}
/**
 * Persists task execution progress to PostHog so clients can poll for updates.
 *
 * The reporter is intentionally best-effort â€“ failures are logged but never
 * allowed to break the agent execution flow.
 */
export declare class TaskProgressReporter {
    private posthogAPI?;
    private logger;
    private taskRun?;
    private taskId?;
    private outputLog;
    private totalSteps?;
    private lastLogEntry?;
    constructor(posthogAPI: PostHogAPIClient | undefined, logger: Logger);
    get runId(): string | undefined;
    start(taskId: string, metadata?: ProgressMetadata): Promise<void>;
    stageStarted(stageKey: string, stageIndex: number): Promise<void>;
    stageCompleted(stageKey: string, completedStages: number): Promise<void>;
    branchCreated(stageKey: string, branchName: string): Promise<void>;
    commitMade(stageKey: string, kind: 'plan' | 'implementation'): Promise<void>;
    pullRequestCreated(stageKey: string, prUrl: string): Promise<void>;
    noNextStage(stageKey?: string): Promise<void>;
    complete(): Promise<void>;
    fail(error: Error | string): Promise<void>;
    appendLog(line: string): Promise<void>;
    recordEvent(event: AgentEvent): Promise<void>;
    private update;
    private summarizeUserMessage;
    private truncateMultiline;
    private formatToolCallEvent;
    private formatToolResultEvent;
}
export {};
//# sourceMappingURL=task-progress-reporter.d.ts.map