{"version":3,"file":"zed.js","sourceRoot":"","sources":["../../../../../src/steps/add-mcp-server-to-clients/clients/zed.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,8CAAoB;AACpB,2CAA6B;AAC7B,uCAAyB;AACzB,4CAAgD;AAChD,0CAAqD;AAExC,QAAA,YAAY,GAAG,aAAC;KAC1B,MAAM,CAAC;IACN,eAAe,EAAE,aAAC,CAAC,MAAM,CACvB,aAAC,CAAC,MAAM,EAAE,EACV,aAAC,CAAC,MAAM,CAAC;QACP,OAAO,EAAE,aAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;QAC/B,MAAM,EAAE,aAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;QAC7B,OAAO,EAAE,aAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;QAC9B,IAAI,EAAE,aAAC,CAAC,KAAK,CAAC,aAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;QACpC,GAAG,EAAE,aAAC,CAAC,MAAM,CAAC,aAAC,CAAC,MAAM,EAAE,EAAE,aAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;KACjD,CAAC,CACH;CACF,CAAC;KACD,WAAW,EAAE,CAAC;AAIjB,MAAa,SAAU,SAAQ,4BAAgB;IAC7C,IAAI,GAAG,KAAK,CAAC;IAEb,qBAAqB;QACnB,OAAO,iBAAiB,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,iBAAiB;QACrB,OAAO,OAAO,CAAC,OAAO,CACpB,OAAO,CAAC,QAAQ,KAAK,QAAQ,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,CAC9D,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,aAAa;QACjB,MAAM,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC;QAC7B,MAAM,KAAK,GAAG,OAAO,CAAC,QAAQ,KAAK,QAAQ,CAAC;QAC5C,MAAM,OAAO,GAAG,OAAO,CAAC,QAAQ,KAAK,OAAO,CAAC;QAE7C,IAAI,KAAK,EAAE,CAAC;YACV,OAAO,OAAO,CAAC,OAAO,CACpB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,eAAe,CAAC,CACtD,CAAC;QACJ,CAAC;QAED,IAAI,OAAO,EAAE,CAAC;YACZ,sDAAsD;YACtD,MAAM,aAAa,GAAG,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;YAClD,IAAI,aAAa,EAAE,CAAC;gBAClB,OAAO,OAAO,CAAC,OAAO,CACpB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,EAAE,eAAe,CAAC,CACjD,CAAC;YACJ,CAAC;YACD,OAAO,OAAO,CAAC,OAAO,CACpB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,eAAe,CAAC,CACtD,CAAC;QACJ,CAAC;QAED,MAAM,IAAI,KAAK,CAAC,yBAAyB,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;IAC/D,CAAC;IAED,eAAe,CACb,MAAc,EACd,IAA+B,EAC/B,gBAA2B;QAE3B,MAAM,UAAU,GAAG,IAAA,iCAAsB,EAAC,MAAM,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAC;QAC1E,OAAO;YACL,OAAO,EAAE,IAAI;YACb,MAAM,EAAE,QAAQ;YAChB,GAAG,UAAU;SACd,CAAC;IACJ,CAAC;CACF;AApDD,8BAoDC","sourcesContent":["import z from 'zod';\nimport * as path from 'path';\nimport * as os from 'os';\nimport { DefaultMCPClient } from '../MCPClient';\nimport { getDefaultServerConfig } from '../defaults';\n\nexport const ZedMCPConfig = z\n  .object({\n    context_servers: z.record(\n      z.string(),\n      z.object({\n        enabled: z.boolean().optional(),\n        source: z.string().optional(),\n        command: z.string().optional(),\n        args: z.array(z.string()).optional(),\n        env: z.record(z.string(), z.string()).optional(),\n      }),\n    ),\n  })\n  .passthrough();\n\nexport type ZedMCPConfig = z.infer<typeof ZedMCPConfig>;\n\nexport class ZedClient extends DefaultMCPClient {\n  name = 'Zed';\n\n  getServerPropertyName(): string {\n    return 'context_servers';\n  }\n\n  async isClientSupported(): Promise<boolean> {\n    return Promise.resolve(\n      process.platform === 'darwin' || process.platform === 'linux',\n    );\n  }\n\n  async getConfigPath(): Promise<string> {\n    const homeDir = os.homedir();\n    const isMac = process.platform === 'darwin';\n    const isLinux = process.platform === 'linux';\n\n    if (isMac) {\n      return Promise.resolve(\n        path.join(homeDir, '.config', 'zed', 'settings.json'),\n      );\n    }\n\n    if (isLinux) {\n      // https://zed.dev/docs/configuring-zed#settings-files\n      const xdgConfigHome = process.env.XDG_CONFIG_HOME;\n      if (xdgConfigHome) {\n        return Promise.resolve(\n          path.join(xdgConfigHome, 'zed', 'settings.json'),\n        );\n      }\n      return Promise.resolve(\n        path.join(homeDir, '.config', 'zed', 'settings.json'),\n      );\n    }\n\n    throw new Error(`Unsupported platform: ${process.platform}`);\n  }\n\n  getServerConfig(\n    apiKey: string,\n    type: 'sse' | 'streamable-http',\n    selectedFeatures?: string[],\n  ) {\n    const baseConfig = getDefaultServerConfig(apiKey, type, selectedFeatures);\n    return {\n      enabled: true,\n      source: 'custom',\n      ...baseConfig,\n    };\n  }\n}\n"]}