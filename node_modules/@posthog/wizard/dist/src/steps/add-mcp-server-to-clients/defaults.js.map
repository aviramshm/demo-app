{"version":3,"file":"defaults.js","sourceRoot":"","sources":["../../../../src/steps/add-mcp-server-to-clients/defaults.ts"],"names":[],"mappings":"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","sourcesContent":["import z from 'zod';\n\nexport const DefaultMCPClientConfig = z\n  .object({\n    mcpServers: z.record(\n      z.string(),\n      z.object({\n        command: z.string().optional(),\n        args: z.array(z.string()).optional(),\n        env: z.record(z.string(), z.string()).optional(),\n      }),\n    ),\n  })\n  .passthrough();\n\nexport const AVAILABLE_FEATURES = {\n  'Data & Analytics': [\n    {\n      value: 'dashboards',\n      label: 'Dashboards',\n      hint: 'Dashboard creation and management',\n    },\n    {\n      value: 'insights',\n      label: 'Insights',\n      hint: 'Analytics insights and SQL queries',\n    },\n    {\n      value: 'experiments',\n      label: 'Experiments',\n      hint: 'A/B testing experiments',\n    },\n    {\n      value: 'llm-analytics',\n      label: 'LLM Analytics',\n      hint: 'LLM usage and cost tracking',\n    },\n  ],\n  'Development Tools': [\n    {\n      value: 'error-tracking',\n      label: 'Error Tracking',\n      hint: 'Error monitoring and debugging',\n    },\n    { value: 'flags', label: 'Feature Flags', hint: 'Feature flag management' },\n  ],\n  'Platform & Management': [\n    {\n      value: 'workspace',\n      label: 'Workspace',\n      hint: 'Organization and project management',\n    },\n    {\n      value: 'docs',\n      label: 'Documentation',\n      hint: 'PostHog documentation search',\n    },\n  ],\n};\n\nexport const ALL_FEATURE_VALUES = Object.values(AVAILABLE_FEATURES)\n  .flat()\n  .map((feature) => feature.value);\n\ntype MCPServerType = 'sse' | 'streamable-http';\n\nexport const getDefaultServerConfig = (\n  apiKey: string,\n  type: MCPServerType,\n  selectedFeatures?: string[],\n  local?: boolean,\n) => {\n  const host = local ? 'http://localhost:8787' : 'https://mcp.posthog.com';\n  const baseUrl = `${host}/${type === 'sse' ? 'sse' : 'mcp'}`;\n\n  const isAllFeaturesSelected =\n    selectedFeatures &&\n    selectedFeatures.length === ALL_FEATURE_VALUES.length &&\n    ALL_FEATURE_VALUES.every((feature) => selectedFeatures.includes(feature));\n\n  const urlWithFeatures =\n    selectedFeatures && selectedFeatures.length > 0 && !isAllFeaturesSelected\n      ? `${baseUrl}?features=${selectedFeatures.join(',')}`\n      : baseUrl;\n\n  return {\n    command: 'npx',\n    args: [\n      '-y',\n      'mcp-remote@latest',\n      urlWithFeatures,\n      '--header',\n      `Authorization:\\${POSTHOG_AUTH_HEADER}`,\n    ],\n    env: {\n      POSTHOG_AUTH_HEADER: `Bearer ${apiKey}`,\n    },\n  };\n};\n"]}