import { RuntimeService } from '../runtime/runtime.service.js';
export class PublicRuntimeService extends RuntimeService {
    constructor(options) {
        super(options);
        this.projectID = options.verify.projectID;
    }
    async interact(request) {
        const { action, config, sessionID, versionID } = request;
        return this.send(`public/${this.projectID}/state/user/${encodeURIComponent(sessionID)}/interact`, {
            method: 'POST',
            body: { action, config },
            headers: {
                ...(versionID && { versionID }),
            },
        });
    }
    async feedback(request) {
        const { versionID, sessionID, ...body } = request;
        await this.send(`feedback/${this.projectID}/user/${encodeURIComponent(sessionID)}`, {
            method: 'POST',
            body,
            headers: {
                ...(versionID && { versionID }),
            },
        });
    }
    async getPublishing(request) {
        const { versionID } = request;
        return this.send(`public/${this.projectID}/publishing`, {
            method: 'GET',
            headers: {
                ...(versionID ? { versionID } : {}),
            },
        });
    }
    async createTranscript(sessionID, metadata) {
        return this.send(`public/${this.projectID}/transcripts`, {
            method: 'POST',
            body: { ...metadata, sessionID },
        });
    }
}
